
### 操作系统的两个状态

内核态和用户态，其本质就是CPU的两种状态。

- 内核态，又称管态或核心态。处理机运行操作系统的状态。在这个模式中，操作系统具有对所有硬件的完全访问权，可以执行及其能够运行的任何指令。
- 用户态，又称目态。处理机运行应用程序的状态。在用户态下，只是用了机器指令中的一个子集，特别的，会影响机器控制或可进行IO操作的指令，用户态完全禁止。

用户接口程序（shell或GUI）处于用户态程序中的最低层次，允许用户运行其他程序，诸如Web浏览器、电子邮件阅读器、音乐播放器等。

操作系统运行在裸机之上，为所有其他软件提供基础的运行环境。

**为什么要分状态**：在CPU的所有指令中，有些指令是非常危险的，如果错用，将导致系统崩溃，比如清内存、设置时钟等。如果所有的程序都能使用这些指令，那么系统死机的概率将大大增加。所以，CPU将指令分为特权指令和非特权指令，对于那些危险的指令，只允许操作系统及其相关模块使用，普通应用程序只能使用那些不会造成灾难的指令。

### 什么是操作系统

- 作为扩展机器的操作系统
- 作为资源管理者的操作系统

### 系统启动

1 硬件系统加电

2 ROM BIOS自举程序  
- 2.1 硬件自检POST  
- 2.2 若软盘启动则执行2.4,若硬盘启动则执行2.5  
- 2.3 提示无启动盘  
- 2.4 将软盘物理第1扇区读入内存07C0:0000处，并将控制权转移到内存07C0:0000,从内存07C0:0000开始执行4  
- 2.5 将硬盘物理第1扇区读入内存07C0:0000处，并将控制权转移到内存07C0:0000,从内存07C0:0000开始执行3  

3 执行硬盘主引导程序,寻找到激活分区,将该分区首扇区读入07C0:0000,原硬盘主引导程序相应下移,从内存07C0:0000开始执行4  

4 执行引导程序(bootstrap),装载相应盘上的OS内核并执行内核初始化程序等指令，从而将OS引导成功。

### 系统调用




### 原语

- 原语PRIMITE是由若干条指令所组成的一个指令序列，用来实现某个特定的操作功能。这个指令序列的执行是连续的，具有不可分割性，在执行时也不可间断，直至该指令序列执行结束
- 原子操作atomic operation：一个操作中的所有动作，要么全做，要么全不做
- 原语是os核心(由一组程序模块所组成的、完成os中基本功能)的一个组成部分，原语必须在管态下执行，并且常驻内存
- 原语与系统调用的区别：原语具有不可中断性，它是通过在其执行过程中关闭中断实现的。原语往往是被系统进程所调用